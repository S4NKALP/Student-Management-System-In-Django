<!-- templates/marksheet/marksheet_detail.html -->
{% extends "admin/base_site.html" %}
{% block content %}
    <div class="container mx-auto p-4">
        <div class="bg-white shadow-lg rounded-lg p-6">
            <!-- Student & Course Info -->
            <div class="mb-6 border-b pb-4">
                <h1 class="text-2xl font-bold mb-2">Student Marksheet</h1>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="font-semibold">Student Name:</p>
                        <p>{{ marksheet.student.first_name }} {{ marksheet.student.last_name }}</p>
                    </div>
                    <div>
                        <p class="font-semibold">Course:</p>
                        <p>{{ marksheet.course.name }}</p>
                    </div>
                </div>
            </div>
            <!-- Marks Table -->
            <div class="overflow-x-auto">
                <table class="w-full table-auto">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="px-4 py-2 text-left">Subject</th>
                            <th class="px-4 py-2 text-center">Theory Marks</th>
                            <th class="px-4 py-2 text-center">Practical Marks</th>
                            <th class="px-4 py-2 text-center">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for subject_mark in marksheet.subject_marks.all %}
                            <tr class="border-b">
                                <td class="px-4 py-2">{{ subject_mark.subject.name }}</td>
                                <td class="px-4 py-2 text-center">
                                    {{ subject_mark.obtained_theory_marks }}/{{
                                    subject_mark.total_theory_marks }}
                                </td>
                                <td class="px-4 py-2 text-center">
                                    {{ subject_mark.obtained_practical_marks }}/{{
                                    subject_mark.total_practical_marks }}
                                </td>
                                <td class="px-4 py-2 text-center">
                                    {{ subject_mark.total_marks }}/{{
                                    subject_mark.total_practical_marks|add:subject_mark.total_theory_marks
                                    }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr class="bg-gray-50 font-bold">
                            <td class="px-4 py-2">Total</td>
                            <td class="px-4 py-2 text-center" colspan="2"></td>
                            <td class="px-4 py-2 text-center">{{ marksheet.obtained_marks }}/{{ marksheet.total_marks }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <!-- Final Grade -->
            <div class="mt-6 text-center">
                <div class="inline-block bg-blue-100 rounded-lg px-6 py-3">
                    <p class="text-lg font-semibold">
                        Final Grade:
                        <span class="text-2xl ml-2 {% if marksheet.grade == 'F' %}text-red-600{% else %}text-green-600{% endif %}">
                            {{ marksheet.grade }}
                        </span>
                    </p>
                    <!--<p class="text-sm text-gray-600">-->
                    <!--    Percentage:-->
                    <!--</p>-->
                </div>
            </div>
        </div>
        <a href="#" class="btn-print" onclick="window.print();">Print PDF</a>
    </div>
{% endblock %}
